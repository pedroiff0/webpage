/* ==========================================================================
   MASTHEAD
   ========================================================================== */
// Ensure masthead children are transparent in dark theme, but allow the
// masthead element itself to keep a translucent overlay for backdrop-filter
html[data-theme="dark"] .masthead * {
  background: transparent !important;
  color: #fff !important;
}

.masthead {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: fit-content;
  z-index: 20;
  background: transparent !important;
  /* create an isolated stacking context so backdrop-filter on the ::before
     pseudo-element consistently captures the page content behind the header
     (helps Chrome/Edge render backdrop-filter correctly) */
  isolation: isolate;
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  -webkit-animation: intro 0.3s both;
  animation: intro 0.3s both;
  -webkit-animation-delay: 0.15s;
  animation-delay: 0.15s;
  overflow: visible;

    /* Apply the translucent background + backdrop-filter on the masthead
      itself (works more consistently across Chrome/Safari than using a
      pseudo-element). The inner content remains sharp because it sits in
      a positioned child with higher z-index. */
    background: var(--masthead-overlay, rgba(255,255,255,0.35)) !important;
    background-clip: padding-box;
    will-change: backdrop-filter, background;
    backdrop-filter: blur(var(--masthead-blur, 20px)) saturate(1.2) !important;
    -webkit-backdrop-filter: blur(var(--masthead-blur, 20px)) saturate(1.2) !important;

  &::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 1px;
    background: var(--global-border-color);
    z-index: 2;
  }

  &__inner-wrap {
    position: relative;
    z-index: 3; // ensure header content sits above the frosted background
    @include container;
    @include clearfix;
    padding: 0.5em 1em;
    font-family: $sans-serif-narrow;

    @include breakpoint($x-large) {
      max-width: $x-large;
    }

    nav {
      z-index: 4;
    }

    a {
      text-decoration: none;
      color: var(--global-masthead-link-color, inherit);
      transition: color 0.2s;
      &:hover, &:focus {
        color: var(--global-masthead-link-color-hover, #5E2A7E);
      }
    }
  }
}

.masthead__menu {

  ul {
    margin: 0;
    padding: 0;
    clear: both;
    list-style-type: none;
  }
}