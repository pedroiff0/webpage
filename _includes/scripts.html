<script type="module" src="{{ base_path }}/assets/js/main.min.js"></script>
<script src="{{ base_path }}/assets/js/dots-bg.js" defer></script>

<!-- Bootstrap 5 JS Bundle (inclui Popper) -->
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script> -->

<!-- Ensure masthead overlays content: clear any body padding set at runtime so backdrop-filter can blur underlying content in Chrome -->
<script>
	(function(){
		function clearBodyPadding(){
			try{ document.body.style.paddingTop = ''; }catch(e){}
		}
		document.addEventListener('DOMContentLoaded', clearBodyPadding);
		window.addEventListener('load', clearBodyPadding);
		setTimeout(clearBodyPadding, 150);
	})();
</script>

{% include analytics.html %}

<script>
	(function(){
		var storageKey = 'siteLang';
		var defaultLang = 'en';
		function setLang(lang){
			try{ localStorage.setItem(storageKey, lang); }catch(e){}
			document.documentElement.setAttribute('lang', lang);
			document.documentElement.classList.remove('pre-lang');
			try { window.dispatchEvent(new Event('langchange')); } catch(e){}
		}
		function init(){
			var saved = defaultLang;
			try{ saved = localStorage.getItem(storageKey) || defaultLang; }catch(e){}
			setLang(saved);
			window.toggleSiteLang = function(){
				var now = document.documentElement.getAttribute('lang') || defaultLang;
				var next = (now === 'en') ? 'pt' : 'en';
				setLang(next);
			};
		}
		if(document.readyState === 'loading'){
			document.addEventListener('DOMContentLoaded', init);
		} else { init(); }
	})();
</script>
